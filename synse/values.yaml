# Default values for Synse Server.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  registry: "" # Add a registry if we need to use the non-default one
  repository: vaporio/synse-server
  # In general, all releases should use a *-slim image -- this is the image
  # without the baked-in emulator. The two common -slim images are:
  #  - edge-slim:   A build from the master branch  (for dev only; not guaranteed stable)
  #  - latest-slim: A build from the latest release (should be stable)
  tag: latest
  pullPolicy: Always

## Service configurations for Synse Server.
## ref: http://kubernetes.io/docs/user-guide/services/
service:
  type: ClusterIP
  port: 5000

ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: nginx
    kubernetes.io/tls-acme: "true"
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

## Configure resource requests and limits.
## ref: http://kubernetes.io/docs/user-guide/compute-resources/
resources:
  requests:
   cpu: 33m
   memory: 150Mi

## Component
component: server

## Synse Server configuration. This configuration is placed into a ConfigMap where
## it is then mounted into the container. The config options here can be overridden
## with environment variables, if desired. For more information on configuring Synse
## Server, see: https://synse-server.readthedocs.io/en/latest/user/configuration.html#configuring-synse-server
config:
  logging: debug
  pretty_json: true

  # For our deployments, we'll enable plugin discovery via
  # kubernetes service endpoints.
  plugin:
    discover:
      kubernetes:
        endpoints:
          labels:
            # FIXME (etd): a while back we discussed keying this off of
            # two labels, "app=synse" and "component=plugin". Right now,
            # the "app" label defaults to the name of the service (e.g.
            # i2c), so we can't use that. for now, we'll only key off of
            # the "component" key. For Synse Server to find the plugin,
            # all plugins must have a service with the "component=plugin"
            # label set.
            component: plugin
